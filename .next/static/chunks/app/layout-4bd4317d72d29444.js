(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6048:function(e,t,r){Promise.resolve().then(r.t.bind(r,8877,23)),Promise.resolve().then(r.bind(r,4264)),Promise.resolve().then(r.bind(r,5115)),Promise.resolve().then(r.bind(r,5446))},4264:function(e,t,r){"use strict";r.d(t,{default:function(){return u},j:function(){return l}});var n=r(7437),s=r(2265);let i=(0,s.createContext)(null),o="pixeldew-cart";function a(e){return Number.isNaN(e)||e<1?1:Math.min(e,99)}function u(e){let{children:t}=e,[r,u]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=window.localStorage.getItem(o);if(e)try{let t=JSON.parse(e);Array.isArray(t)&&u(t.map(e=>({...e,quantity:a(e.quantity)})))}catch(e){window.localStorage.removeItem(o)}},[]),(0,s.useEffect)(()=>{window.localStorage.setItem(o,JSON.stringify(r))},[r]);let l=(0,s.useCallback)(e=>{u(t=>t.find(t=>t.slug===e.slug)?t.map(t=>t.slug===e.slug?{...t,quantity:a(t.quantity+1)}:t):[...t,{id:e.id,slug:e.slug,name:e.name,price:e.price,scalevVariantUniqueId:e.scalevVariantUniqueId,quantity:1}])},[]),c=(0,s.useCallback)(e=>{u(t=>t.filter(t=>t.slug!==e))},[]),d=(0,s.useCallback)((e,t)=>{u(r=>r.map(r=>r.slug===e?{...r,quantity:a(t)}:r))},[]),h=(0,s.useCallback)(()=>u([]),[]),f=(0,s.useMemo)(()=>r.reduce((e,t)=>e+t.quantity,0),[r]),v=(0,s.useMemo)(()=>({items:r,count:f,addItem:l,removeItem:c,updateQuantity:d,clear:h}),[r,f,l,c,d,h]);return(0,n.jsx)(i.Provider,{value:v,children:t})}function l(){let e=(0,s.useContext)(i);if(!e)throw Error("useCart must be used within CartProvider");return e}},5115:function(e,t,r){"use strict";r.d(t,{default:function(){return a}});var n=r(7437),s=r(2265),i=r(6463),o=r(4264);function a(){let e=(0,i.useRouter)(),{count:t}=(0,o.j)(),[r,a]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(t>0){let e=window.requestAnimationFrame(()=>a(!0));return()=>window.cancelAnimationFrame(e)}a(!1)},[t]),0===t)?null:(0,n.jsxs)("button",{type:"button",onClick:()=>e.push("/cart"),className:"fixed left-4 bottom-4 z-50 flex items-center gap-2 rounded-full border border-dotted border-dew-mint/60 bg-space-900/80 px-4 py-2 text-[11px] font-arcade text-white shadow-[0_0_12px_rgba(138,255,227,0.25)] backdrop-blur transition-all duration-200 hover:shadow-[0_0_18px_rgba(138,255,227,0.45)] ".concat(r?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),"aria-label":"Open cart",children:[(0,n.jsx)("span",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-dew-mint/40 bg-space-800/70",children:(0,n.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:[(0,n.jsx)("path",{d:"M6 6h14l-2 9H8L6 6Z"}),(0,n.jsx)("path",{d:"M6 6L4 3H2"}),(0,n.jsx)("path",{d:"M9 19a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"}),(0,n.jsx)("path",{d:"M17 19a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})]})}),(0,n.jsx)("span",{children:"Cart"}),(0,n.jsx)("span",{className:"flex h-5 min-w-[1.25rem] items-center justify-center rounded-full bg-dew-mint px-1 text-[10px] text-space-900",children:t})]})}},5446:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var n=r(7437),s=r(2265);let i=r(357).env.NEXT_PUBLIC_ADMIN_DEBUG_TOKEN;function o(){var e,t,r,o,a;let[u,l]=(0,s.useState)({env:null,routes:{checkout:null,webhook:null},error:null}),c=(0,s.useMemo)(()=>!!i&&new URL(window.location.href).searchParams.get("debugToken")===i,[]);return((0,s.useEffect)(()=>{if(!c)return;let e=!0;return(async()=>{try{let[t,r,n]=await Promise.all([fetch("/api/debug/scalev"),fetch("/api/scalev/checkout",{method:"OPTIONS"}),fetch("/api/webhooks/scalev",{method:"OPTIONS"})]),s=await t.text(),i=s?JSON.parse(s):null;if(!e)return;l({env:i,routes:{checkout:t.ok?404!==r.status:null,webhook:t.ok?404!==n.status:null},error:t.ok?null:"Failed to load env status."})}catch(r){if(!e)return;let t=r instanceof Error?r.message:"Failed to load debug status.";l(e=>({...e,error:t}))}})(),()=>{e=!1}},[c]),c)?(0,n.jsxs)("div",{className:"fixed right-4 bottom-4 z-50 w-[280px] rounded-xl border border-neon-cyan/40 bg-space-900/90 p-4 text-[10px] text-white/70 shadow-insetPixel backdrop-blur",children:[(0,n.jsx)("div",{className:"font-arcade text-white",children:"Admin Debug"}),(0,n.jsx)("div",{className:"mt-2 text-white/50",children:"Scalev status"}),u.error&&(0,n.jsx)("div",{className:"mt-2 text-rose-200",children:u.error}),(0,n.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,n.jsx)("div",{className:"text-white/40",children:"Routes"}),(0,n.jsxs)("div",{children:["Checkout: ",null===u.routes.checkout?"—":u.routes.checkout?"OK":"Missing"]}),(0,n.jsxs)("div",{children:["Webhook: ",null===u.routes.webhook?"—":u.routes.webhook?"OK":"Missing"]})]}),(0,n.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,n.jsx)("div",{className:"text-white/40",children:"Env"}),(0,n.jsxs)("div",{children:["API Base: ",(null===(e=u.env)||void 0===e?void 0:e.scalevApiBase)?"OK":"Missing"]}),(0,n.jsxs)("div",{children:["API Key: ",(null===(t=u.env)||void 0===t?void 0:t.scalevApiKey)?"OK":"Missing"]}),(0,n.jsxs)("div",{children:["Store ID: ",(null===(r=u.env)||void 0===r?void 0:r.scalevStoreUniqueId)?"OK":"Missing"]}),(0,n.jsxs)("div",{children:["Payment Method: ",(null===(o=u.env)||void 0===o?void 0:o.scalevPaymentMethod)?"OK":"Missing"]}),(0,n.jsxs)("div",{children:["Public Order Base: ",(null===(a=u.env)||void 0===a?void 0:a.scalevPublicOrderBase)?"OK":"Missing"]})]})]}):null}},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},357:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(8081)},8081:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u=[],l=!1,c=-1;function d(){l&&n&&(l=!1,n.length?u=n.concat(u):c=-1,u.length&&h())}function h(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(n=u,u=[];++c<t;)n&&n[c].run();c=-1,t=u.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var i=r[e]={exports:{}},o=!0;try{t[e](i,i.exports,n),o=!1}finally{o&&delete r[e]}return i.exports}n.ab="//";var s=n(229);e.exports=s}()},8877:function(){}},function(e){e.O(0,[404,971,23,744],function(){return e(e.s=6048)}),_N_E=e.O()}]);